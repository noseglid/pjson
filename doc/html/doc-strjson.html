<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>

<title>Serializing: Converting built-in types to JSON strings</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Serializing: Converting built-in types to JSON strings </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Serializing (also deflating or marshalling) built-in types is done using the <a class="el" href="namespace_json.html#afd244875714ddd43bf3cd05e9dceba8a">Json::serialize</a> function.</p>
<p><a class="el" href="namespace_json.html#afd244875714ddd43bf3cd05e9dceba8a">Json::serialize</a> takes two arguments - the first is the container you wish to serialize into a JSON string. The second is how to format the string.</p>
<ul>
<li><b>Container</b> Almost any container can be serialized. The containers may contain almost any types including additional containers or primitive types.</li>
<li><b>Format</b> Two formats are supported; pretty or minified.</li>
</ul>
<h2><a class="anchor" id="formatting"></a>
Formatting</h2>
<p>The output can be formatted in two different ways; pretty or minified.</p>
<h3><a class="anchor" id="formatting-pretty"></a>
Pretty formatting</h3>
<p>Pretty formatting can be used for debugging purposes or when you want to quickly present the data. Note that all the string is still a valid JSON string, meaning all delimiters, quotations, etc. will be in the string.</p>
<p>Here is a simple example of how to serialize a std::map&lt;std::string, int&gt;, containing my favorite book series and the number of words in each book.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;pjson/pjson.hpp&gt;</span>

<span class="preprocessor">#include &lt;string&gt;</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
{
        <span class="comment">/* The Wheel of Time words per book */</span>
        std::map&lt;std::string, int&gt; words;
        words[<span class="stringliteral">&quot;New Spring&quot;</span>]           = 121815;
        words[<span class="stringliteral">&quot;The Eye of the World&quot;</span>] = 305902;
        words[<span class="stringliteral">&quot;The Great Hunt&quot;</span>]       = 267078;
        words[<span class="stringliteral">&quot;The Dragon Reborn&quot;</span>]    = 251392;
        words[<span class="stringliteral">&quot;The Shadow Rising&quot;</span>]    = 393823;

        <span class="comment">/* Parse the JSON string */</span>
        std::string json = <a class="code" href="namespace_json.html#afd244875714ddd43bf3cd05e9dceba8a">Json::serialize</a>(words, <a class="code" href="namespace_json.html#a20420387994c621e23e74cd3a33aad4caadbba3b5ff7923556de871aabdb9ce9e">Json::FORMAT_PRETTY</a>);

        <span class="comment">/* ... and print it */</span>
        std::cout &lt;&lt; json &lt;&lt; std::endl;

        <span class="keywordflow">return</span> 0;
}
</pre></div> <div class="fragment"><pre class="fragment">{
        <span class="stringliteral">&quot;New Spring&quot;</span> : 121815,
        <span class="stringliteral">&quot;The Dragon Reborn&quot;</span> : 251392,
        <span class="stringliteral">&quot;The Eye of the World&quot;</span> : 305902,
        <span class="stringliteral">&quot;The Great Hunt&quot;</span> : 267078,
        <span class="stringliteral">&quot;The Shadow Rising&quot;</span> : 393823
}
</pre></div><h3><a class="anchor" id="formatting-minifed"></a>
Minified formatting</h3>
<p>Minified formatting is useful for transmitting. All insignificant white-spaces have been removed which reduces the number of bytes the string consist of. This is very important as the size of the data structures increase. The resulting string is (of course) also a valid JSON string.</p>
<p>Here is the same example as above, only now we have left out the formatting argument so it takes the default argument <code>Json::FORMAT_MINIFED</code> (of course we could've called the function with this argument to get the very same result).</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;pjson/pjson.hpp&gt;</span>

<span class="preprocessor">#include &lt;string&gt;</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
{
        <span class="comment">/* The Wheel of Time words per book */</span>
        std::map&lt;std::string, int&gt; words;
        words[<span class="stringliteral">&quot;New Spring&quot;</span>]           = 121815;
        words[<span class="stringliteral">&quot;The Eye of the World&quot;</span>] = 305902;
        words[<span class="stringliteral">&quot;The Great Hunt&quot;</span>]       = 267078;
        words[<span class="stringliteral">&quot;The Dragon Reborn&quot;</span>]    = 251392;
        words[<span class="stringliteral">&quot;The Shadow Rising&quot;</span>]    = 393823;

        <span class="comment">/* Parse the JSON string, minified format is the default */</span>
        std::string json = <a class="code" href="namespace_json.html#afd244875714ddd43bf3cd05e9dceba8a">Json::serialize</a>(words);

        <span class="comment">/* ... and print it */</span>
        std::cout &lt;&lt; json &lt;&lt; std::endl;

        <span class="keywordflow">return</span> 0;
}
</pre></div> <div class="fragment"><pre class="fragment">{<span class="stringliteral">&quot;New Spring&quot;</span>:121815,<span class="stringliteral">&quot;The Dragon Reborn&quot;</span>:251392,<span class="stringliteral">&quot;The Eye of the World&quot;</span>:305902,<span class="stringliteral">&quot;The Great Hunt&quot;</span>:267078,<span class="stringliteral">&quot;The Shadow Rising&quot;</span>:393823}
</pre></div> </div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 9 2012 12:41:19 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
